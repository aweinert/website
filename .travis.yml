language: ruby
rvm:
- 2.4.1
stages:
  name: deploy
  if: repo = aweinert/website and branch = ci-deploy and env(RSYNC_HOST) is set and
    env(RSYNC_PASSWORD) is set
install: gem install jekyll jekyll-scholar html-proofer
script:
- jekyll b
- htmlproofer --allow-hash-href --empty-alt-ignore --only-4xx _site
deploy:
  provider: script
  skip_cleanup: true
  script: cd _site ; find . -type f -exec curl --silent --user FTP_USER:FTP_PASSWORD
    --ftp-create-dirs -T {} $FTP_HOST/\{\} \;
  on:
    branch: ci-deploy
env:
  global:
  - secure: IHHA7X83cpm5toKBHsj2DjXOz35rD8+MVkpobfacuJJ5LAZg9RjYn96bkCCgUCIjYbHL6z/l2QtO0cAK4VupKkaV9P5mUQ31zR9kYFbjV42DbagnfEn+rwhNGsz2AaaHmRS6SaFrVAQUUKNbrTfpi9nt24f3I9tUHMpMo8iUqLfITiU3EZ3CvfgXnx4fd8e5C3Rj39GZ9DN2gulPblydn+uhaInNyark7trHEiU9qhxCGF/JaKY1Dd6syF/0JIpSbOy4hgkif+duWsmTPieBhKHnWLgWyZ6URtkuKHCof1sUpY8UM49X73S81vbRncBGKAI50/2mJDRNBmLe8VwkgglegXnnLbPYHmkqhI88A/EcyWLmBqjR3QPRBvdvNwvWGQ1V0G4plIf9c2y2ao5UQNm6D2lom3ro8Y+2lGHXkGcsmXPlRPClmBI66S67yJ/0ifRIN9rQpVjTbPE5/YYDMXX+VXXj2gnBx7k8DpyTe7BhgcsQFUQ2Nt0ahTujzvMxw9LdBbaNM6sRu++zt4r+rOkrQlXIR/SR0xLBUWHNT4ukCDC3fev2GULMMLxQQboOPlgDjI11aKuqJtJky3jfIsYpsCuKqgQk6zE2e/dyKx+QuHVZapO2UjlxukdM0UFKNAZa/tWwwDvOEphPR75kyeZQOriZNkQQMGoUK9elR5k=
  - secure: DNuT94BFlJDzJ9pwQTHg88aw241yLCKSEQq0nK/J94bBjcu56l8RfVSfFvmeFoA34F4Q6Tm8rvpXT1+59F8hEcxv2dN3OokG5D+yexzZaL9xvQMKjbDSIpBs71kniaWVKTvsNdTcaqPM4fjjQ98IL4uu+6+MulFBz9OeqFlZtPOuDUmRTLJ5R6FUIJg44A4F9x9Msnhk9fP0AB5j287n7jBvjAls39Yx/DSLwSfE36ppVOdOXxr9UN76BlUQgogrZPy6cgXaotOmJ0goqYxd6K0OcZ+rgsO6uyRLUf0tgSmvLyA2t/RihqRSm8amu6lT8raohrAC9tPzr3DrpBKGGBbEGiE5OSDUspqDjTsFddEsKgZBxPyL/+nMmyjbmLKPCN1GwuL75LjR7du1GmIbNo0tzSr+RBBcARqwucXconf+DMDoEzRSy2yJtE0vniSKbo8TmliC6SHxtE2hIuOAh0sXKtzZZebJGx/U9rvAXS7rj28rboW7Z1/Ffe+bXIq6dzimbHX7QOlNBOzrbaOUYKyKlvv0QPl/cJi2K/CINMToxzhFLbrBP7vWBNKK6sbndTJ5VuwoLXe26Bg+S07dEzqLu4JYWrYzSbpemaoFWvyeLAosUrjO0gQ6gSxhrCad4se7x4phrPumntckgbzesRsshJTqi/IDGnI0pzRjTnI=
  - secure: AfoU1GQGOFQm6DOhciN7u+cWopAZ1dV7UtmX6goWLhC+17NKjLfJC1xe6BdSlVYX1YPIppdzmDqA+ApLrLq/PR/qIjT7r633udQd7fzOadJHjy1+RO6FG2hqxBs6KWCoisKp7onsQpEI4ulzFH+J2LpBmWefZn6RS5A9JGcsLU3JFT6YbTpl5ymS+ZVbAx45lVFqWGMIUIpyOQr+43WWyefvXX3mcVFVao3V5NCnT5jKhF/8r0OHV6Wc2FGEPH28ptIYL29o9NLuJUoFzxqQmHb9/OFSioDvJ/ace3UyYxMOWZirHO7KY2F7y+UvCRc4DSSm/UkHxsSv7UW/g8tNb9ULCXoHvU58A1Z9rQ+lBYVO79eOeaQpqizjcQD7hiruE9KgX5e6IzfRt79zGUBZ7tdIQMu95x4k7gVcyGQIk9QPj94Hx5v7bEC3ec1GH31gfyN5DKgg/9C1L6e+S8Z6CLDVhBAnEw7OqmFpUsUrbk5sEYXM4PguIJIhkX6+D10LxVtYzuOkjGgV1VkHvvloH1kHEjGeoHjMJGRfAdEjLEbXmjwiYK+3KiJKLAA+EmpN4GfKovKTvQWzyFCGT6urg6li2DNQcBVO3RUXv4Rw4Gc6Izofew/hSxsF4Ni7aQGL168x41b0Uwmr99GVzx1nzDft2bhhPOkH3bEiQJ8KlwE=
